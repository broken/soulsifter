import { css, html, LitElement } from "@polymer/lit-element";

import "@polymer/paper-toggle-button/paper-toggle-button.js";

import { SearchOptionsMixin } from "./mixin-search-options.js";


class SearchOptions extends SearchOptionsMixin(LitElement) {
  render() {
    return html`
      <section>
        <div class="option">
          <paper-toggle-button id="bpmRestrict" @checked-changed="${this.checkedChanged}"></paper-toggle-button>
          <span>BPM restrict</span>
        </div>
        <div class="option">
          <paper-toggle-button id="keyRestrict" @checked-changed="${this.checkedChanged}"></paper-toggle-button>
          <span>Key restrict</span>
        </div>
        <div class="option">
          <paper-toggle-button id="trashedRestrict" @checked-changed="${this.checkedChanged}"></paper-toggle-button>
          <span>Trashed restrict</span>
        </div>
        <div class="option">
          <paper-toggle-button id="repeatRestrict" @checked-changed="${this.checkedChanged}"></paper-toggle-button>
          <span>Repeat restrict</span>
        </div>
        <div class="option">
          <paper-toggle-button id="mvRestrict" @checked-changed="${this.checkedChanged}"></paper-toggle-button>
          <span>Music Video mode</span>
        </div>
      <section>
    `;
  }

  checkedChanged(e) {
    this.searchOptions = {
        bpmRestrict: this.shadowRoot.getElementById('bpmRestrict').checked,
        keyRestrict: this.shadowRoot.getElementById('keyRestrict').checked,
        trashedRestrict: this.shadowRoot.getElementById('trashedRestrict').checked,
        repeatRestrict: this.shadowRoot.getElementById('repeatRestrict').checked,
        mvRestrict: this.shadowRoot.getElementById('mvRestrict').checked,
    };
    this.changeSearchOptions(this.searchOptions);
  }

  searchOptionsChanged(x) {
    this.searchOptions = x;
    this.shadowRoot.getElementById('bpmRestrict').checked = this.searchOptions.bpmRestrict;
    this.shadowRoot.getElementById('keyRestrict').checked = this.searchOptions.keyRestrict;
    this.shadowRoot.getElementById('trashedRestrict').checked = this.searchOptions.trashedRestrict;
    this.shadowRoot.getElementById('repeatRestrict').checked =  this.searchOptions.repeatRestrict;
    this.shadowRoot.getElementById('mvRestrict').checked =  this.searchOptions.mvRestrict;
  }

  static get styles() {
    return [
      css`
        :host {
          white-space: nowrap;
        }
        section {
          display: flex;
          flex-direction: column;
        }
        .option {
          display: flex;
          flex-direction: row;
        }
        paper-toggle-button {
          padding-top: 3px;
          margin-left: 15px;
        }
        span {
          padding-left: 10px;
          margin-right: 15px;
        }
      `
    ];
  }
}

window.customElements.define('search-options', SearchOptions);
