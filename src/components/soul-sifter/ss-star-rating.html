<link href="../polymer/polymer.html" rel="import">

<link href="../iron-icon/iron-icon.html" rel="import">


<dom-module id="ss-star-rating">
  <template>
    <custom-style>
      <style>
        :host {
          white-space: nowrap;
          color: var(--ss-star-rating-color);
        }
        :host(.trashed) {
          color: var(--ss-star-rating-trashed-color);
        }
        iron-icon {
          height: 13px;
          width: 13px;
          color: inherit;
        }
        iron-icon[selected] {
          color: var(--ss-star-rating-selected-color);
        }
      </style>
    </custom-style>
    <template is="dom-repeat" items="[[stars]]">
      <iron-icon icon="star" selected$="[[_isSelected(item, value)]]" on-click="_select"></iron-icon>
    </template>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'ss-star-rating',

    properties: {
      count: {
        type: Number,
        value: 5
      },
      value: {
        type: Number,
        value: 0,
        notify: true
      },
      readOnly: {
        type: Boolean,
        value: false
      },
      stars: {
        type: Array,
        computed: '_computeStars(count)',
        readOnly: true
      }
    },

    _computeStars: function(count) {
      var stars = [];
      for (var i = 0; i < count; ++i) {
        stars.push(i);
      }
      return stars;
    },

    _isSelected: function(item, value) {
      return item < value;
    },

    _select: function(e) {
      if (!this.readOnly)
        this.value = e.model.item + 1;
    },
  });
</script>
