<link href="../polymer/polymer.html" rel="import">

<link href="../core-ajax/core-ajax.html" rel="import">
<link href="../core-collapse/core-collapse.html" rel="import">
<link href="../core-selection/core-selection.html" rel="import">
<link href="../core-style/core-style.html" rel="import">
<link href="../paper-icon-button/paper-icon-button.html" rel="import">

<link href="genre-list-item.html" rel="import">
<link href="themes.html" rel="import">


<polymer-element name="genre-list" attributes="selection">

  <template>
    <link href="genre-list.css" rel="stylesheet">
    <core-style ref="main"></core-style>

    <template repeat="{{g in genres}}" id="genreTpl">
      <genre-list-item genre="{{g}}" on-genre-select="{{selectAction}}"></genre-list-item>
    </template>
    <core-selection multi id="selection"></core-selection>
  </template>

<script>
    Polymer('genre-list', {

      domReady: function() {
        this.genres = ss.Style.findAllParents();
      },

      setSelection: function(genres) {
        for (var i = 0, item = this.$.genreTpl.nextElementSibling;
            item && i < this.genres.length;
            item = item.nextElementSibling, ++i) {
          item.selectIfInArray(genres);
        }
      },

      selectAction: function(e, detail, sender) {
        this.$.selection.select(detail);
        this.selection = this.$.selection.getSelection();
      },
      
    });
  </script>
</polymer-element>