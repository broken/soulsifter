<link href="../polymer/polymer.html" rel="import">

<link href="../core-ajax/core-ajax.html" rel="import">
<link href="../core-collapse/core-collapse.html" rel="import">
<link href="../core-selection/core-selection.html" rel="import">
<link href="../core-style/core-style.html" rel="import">
<link href="../paper-icon-button/paper-icon-button.html" rel="import">

<link href="genre-list-item.html" rel="import">
<link href="themes.html" rel="import">


<polymer-element name="genre-list">

  <template>
    <link href="genre-list.css" rel="stylesheet">
    <core-style ref="main"></core-style>

    <template repeat="{{g in genres}}">
      <genre-list-item genre="{{g}}" on-genre-select="{{selectAction}}"></genre-list-item>
    </template>
    <core-selection multi id="selection"></core-selection>
  </template>

<script>
  var ss = require('../soulsifter/build/Release/soulsifter');
    Polymer('genre-list', {

      created: function(event, response) {
        this.genres = ss.Style.findAllParents();
      },

      selectAction: function(e, detail, sender) {
        this.$.selection.select(detail);
        this.asyncFire('core-signal', {name: 'genres-changed', data: this.$.selection.getSelection()});
      },
      
    });
  </script>
</polymer-element>