<link href="../polymer/polymer.html" rel="import">

<link href="../core-icon/core-icon.html" rel="import">
<link href="../core-menu/core-menu.html" rel="import">
<link href="../core-style/core-style.html" rel="import">
<link href="../paper-dropdown/paper-dropdown.html" rel="import">
<link href="../paper-icon-button/paper-icon-button.html" rel="import">
<link href="../paper-item/paper-item.html" rel="import">
<link href="../paper-menu-button/paper-menu-button.html" rel="import">
<link href="../paper-ripple/paper-ripple.html" rel="import">
<link href="../paper-shadow/paper-shadow.html" rel="import">

<link href="themes.html" rel="import">


<polymer-element name="playlist-list-item" attributes="playlist">

  <template>
    <link href="playlist-list-item.css" rel="stylesheet">
    <core-style ref="main"></core-style>

    <div id="itemContainer">
      <paper-shadow animated id="shadow" z="0">
        <div horizontal layout center id="item" class="{{ {'selected': isSelected} | tokenList }}" on-click="{{clickAction}}">
          <paper-ripple fit></paper-ripple>
          <div flex>
            {{playlist.name}}
            <core-icon icon="find-replace" alt="smart playlist" class="{{ {'smart': playlist.query} | tokenList }}"></core-icon>
          </div>
          <paper-menu-button on-click="{{stopPropagation}}">
            <paper-icon-button icon="more-vert"></paper-icon-button>
            <paper-dropdown class="dropdown" transition="cascade">
              <core-menu>
                <paper-item on-click="{{clickEditAction}}">Edit info</paper-item>
              </core-menu>
            </paper-dropdown>
          </paper-menu-button>
        </div>
      </paper-shadow>
    </div>
  </template>

  <script>
    Polymer('playlist-list-item', {
      /** @event playlist-select */

      /** @attribute playlist */

      /** @attribute selected */
      isSelected: false,

      clickAction: function(e, detail, sender) {
        this.asyncFire('playlist-select', this);
      },

      /** @method select */
      select: function(isSelected) {
        this.$.shadow.setZ(isSelected ? 1 : 0);
        this.isSelected = isSelected;
      },

      clickEditAction: function(e, detail, sender) {
        e.stopPropagation();
        this.asyncFire('page-playlist-edit', {playlist: this.playlist});
      },

      stopPropagation: function(e, detail, sender) {
        e.stopPropagation();
      },

    });
  </script>
</polymer-element>
